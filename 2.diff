--- a/app/src/main/java/cc/bbq/xq/ui/plaza/PlazaViewModel.kt
+++ b/app/src/main/java/cc/bbq/xq/ui/plaza/PlazaViewModel.kt
@@ -30,12 +30,14 @@ class PlazaViewModel(
     private val _categories = MutableLiveData<List<UnifiedCategory>>(emptyList())
     val categories: LiveData<List<UnifiedCategory>> = _categories
 
+    // 新增：暴露当前选中的分类ID
+    private val _currentCategoryId = MutableLiveData<String?>()
+    val currentCategoryId: LiveData<String?> = _currentCategoryId
+
     private val _plazaData = MutableLiveData(PlazaData(emptyList()))
     val plazaData: LiveData<PlazaData> = _plazaData
     // ... 其他 LiveData ...
 
-    private var currentCategoryId: String? = null // 这个是内部变量，与上面暴露的区分
-    private var currentUserId: String? = null
     // ... 其他内部变量 ...
 
@@ -110,11 +112,13 @@ class PlazaViewModel(
 
     fun loadCategory(categoryId: String?) {
         if (isSearchMode) {
             cancelSearch()
         }
-        if (currentCategoryId == categoryId) return // 这里的 currentCategoryId 是内部变量
+        // 修正：比较内部变量
+        if (this.currentCategoryId == categoryId) return
 
-        currentCategoryId = categoryId // 更新内部变量
+        this.currentCategoryId = categoryId // 更新内部变量
+        _currentCategoryId.value = categoryId // 更新暴露的 LiveData
         savedCurrentCategoryId = categoryId
         loadPage(1)
     }
@@ -180,12 +184,14 @@ class PlazaViewModel(
     private fun resetStateAndLoadCategories() {
         _isLoading.value = true
-        currentCategoryId = null // 重置内部变量
+        this.currentCategoryId = null // 重置内部变量
+        _currentCategoryId.value = null // 重置暴露的 LiveData
         
         viewModelScope.launch(Dispatchers.IO) {
             try {
                 // ... 模式判断 ...
                 
-                when (currentMode) { // 根据模式设置特殊的分类ID
+                val specialCategoryId = when (currentMode) { // 根据模式设置特殊的分类ID
                     "my_upload" -> "-3"
                     "my_favourite" -> "-4"
                     "my_history" -> "-5"
                     else -> null
                 }
-                currentCategoryId = specialCategoryId // 更新内部变量
+                this.currentCategoryId = specialCategoryId // 更新内部变量
+                _currentCategoryId.value = specialCategoryId // 更新暴露的 LiveData
 
                 // ... 特殊模式处理 ...
                 if (currentMode in listOf("my_upload", "my_favourite", "my_history")) {
                     _categories.postValue(emptyList())
                     _isLoading.postValue(false)
                     withContext(Dispatchers.Main) {
-                        loadPage(1, append = false)
+                        // 在 loadPage 内部会更新 currentCategoryId，这里可能不需要
+                        // 或者确保 loadPage 不会覆盖 specialCategoryId
+                        // 最稳妥的方式是在这里直接设置，因为特殊模式下分类列表为空
+                        loadPage(1, append = false) 
                     }
                 } else {
                     // ... 普通模式加载分类 ...
                     if (categoriesResult.isSuccess) {
                         val categoryList = categoriesResult.getOrThrow()
                         _categories.postValue(categoryList)
                         
-                        if (currentCategoryId == null) { // 检查内部变量
-                            currentCategoryId = categoryList.firstOrNull()?.id // 更新内部变量
+                        // 修正：如果之前没有特殊分类且当前也没有设置，则默认选中第一个
+                        if (this.currentCategoryId == null) { // 检查内部变量
+                            val defaultId = categoryList.firstOrNull()?.id
+                            this.currentCategoryId = defaultId // 更新内部变量
+                            _currentCategoryId.value = defaultId // 更新暴露的 LiveData
                         }
                         // ... _isLoading.postValue(false) ...
                         withContext(Dispatchers.Main) {
                             loadPage(1, append = false)
                         }
                     } else {
                         // ... 错误处理 ...
+                        _currentCategoryId.value = null // 错误时也更新暴露的 LiveData
                     }
                 }
             } catch (e: Exception) {
                 // ... 异常处理 ...
+                _currentCategoryId.value = null // 异常时也更新暴露的 LiveData
             }
         }
     }
@@ -200,11 +208,13 @@ class PlazaViewModel(
             try {
                 // ... finalUserId 计算 ...
 
                 val result = if (isSearchMode) {
                     currentRepository.searchApps(currentQuery, page, finalUserId)
                 } else {
-                    currentRepository.getApps(currentCategoryId, page, finalUserId) // 使用内部变量
+                    currentRepository.getApps(this.currentCategoryId, page, finalUserId) // 使用内部变量
                 }
 
                 if (result.isSuccess) {
                     // ... 数据处理 ...
+                    // loadPage 内部不再需要更新 _currentCategoryId.value，除非有特殊逻辑
+                    // 例如，如果 API 返回了一个新的默认分类，那可以在这里更新
+                    // 但通常情况下，分类ID是由用户选择或初始化时确定的
                 } else {
                     // ... 错误处理 ...
                 }
             } catch (e: Exception) {
                 // ... 异常处理 ...
             } finally {
                 _isLoading.postValue(false)
             }
         }
     }